FROM gradle:jdk17-alpine
WORKDIR /service
COPY . .

ARG DATA_SERVICE_URL
ARG WIREMOCK_URL
ARG WIREMOCK_PORT
ENV DATA_SERVICE_URL=$DATA_SERVICE_URL
ENV WIREMOCK_URL=$WIREMOCK_URL
ENV WIREMOCK_PORT=$WIREMOCK_PORT

RUN ./gradlew build -x test
CMD ./gradlew test